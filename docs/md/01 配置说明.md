## Config

每个 weapp-gulp-service 项目都必须提供一份配置文件（哪怕是一份空配置）。因为在 weapp-gulp-service 内部，以及配置文件本身，都是相对于配置文件所在目录而计算文件位置的。配置文件所在目录即项目根目录。

ps: 运行 weapp-gulp-service 时，如果不提供 config 参数，则默认视为读取当前环境下的 weapp.config.js 文件。

默认配置如下:

```js
module.exports = {
    // 环境变量
    env: {},
    // 编译模式
    mode: 'development',
    // 输出目录
    output: 'dist',
    // 源码目录
    source: 'src',
    // 图片类型
    imgType: ['jpg', 'png', 'svg', 'webp', 'gif'],
    // 路径别名
    alias: {
        '@': './src',
    },
    // less编译选项
    less: {
        javascriptEnabled: true,
    },
    // less全局混入文件路径（通常用于定义主题变量）
    lessVar: '',
    // postcss-px2rpx选项
    px2rpx: {
        times: 2, // px -> rpx 转换倍数
    },
    // 图片转base64选项
    base64: {
        baseDir: '', // 相对于所在css文件
        exclude: ['alicdn'],
        maxImageSize: 8 * 1024, // 8kb,
        deleteAfterEncoding: false, // 转换后删除原图片（慎用,g）
        debug: false, // 是否开启调试
    },
    // 任务配置
    tasks: {
        wxml: {
            test: `./**/*.wxml`,
            use: ['gulp-wxml'],
        },
        js: {
            test: `./**/*.js`,
            use: ['gulp-js'],
        },
        wxs: {
            test: `./**/*.wxs`,
            use: ['gulp-wxs'],
        },
        less: {
            test: `./**/*.less`,
            use: ['gulp-less'],
            compileAncestor: true,
        },
        css: {
            test: `./**/*.css`,
            use: ['gulp-css'],
        },
        wxss: {
            test: `./**/*.wxss`,
            use: ['gulp-wxss'],
        },
        img: {
            test: ({ imgType }) => `./**/*.{${imgType.join(',')}}`,
            use: ['gulp-img'],
        },
        json: {
            test: `./**/*.json`,
            use: ['gulp-json'],
        },
        json5: {
            test: `./**/*.json5`,
            use: ['gulp-json'],
        },
        mp: {
            test: `./**/*.mp`,
            use: ['gulp-mp'],
        },
        vue: {
            test: `./**/*.vue`,
            use: ['gulp-mp'],
        },
    },
}
```

可以在自定义配置文件中覆盖/扩展默认选项。比如：

```js
module.exports = {
    // 添加环境变量（优先级高于.env等配置文件）
    env: {
        APPID: 'xxxxxxxxx',
    },
    // 路径别名
    alias: {
        _c: './src/components',
    },
    // 全局less
    lessVar: `src/theme/blue.less`, // 蓝色主题
}
```
